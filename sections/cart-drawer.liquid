<div id="cart-overlay" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[140] opacity-0 pointer-events-none transition-opacity duration-300" data-cart-overlay></div>

<aside
	id="cart-drawer"
	class="fixed top-0 right-0 h-full w-full md:w-[450px] bg-[#0a0a0a] border-l border-white/10 z-[150] transform translate-x-full transition-transform duration-300 ease-in-out flex flex-col shadow-2xl"
	data-cart-drawer
	aria-live="polite"
>
	<div class="relative border-b border-white/5 overflow-hidden flex-shrink-0 bg-zinc-900">
		<div class="absolute -top-12 -right-12 w-40 h-40 bg-purple-600/10 rounded-full blur-[60px]"></div>

		<div class="relative p-5 pb-4">
			<div class="flex items-center justify-between mb-4">
				<h2 class="text-2xl font-black tracking-tighter text-white uppercase italic">Cart</h2>
				<button id="close-cart-btn" class="group flex items-center justify-center w-9 h-9 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 transition-all" data-cart-close>
					<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
						<line x1="18" y1="6" x2="6" y2="18"></line>
						<line x1="6" y1="6" x2="18" y2="18"></line>
					</svg>
				</button>
			</div>

			<div class="flex gap-2 mb-4">
				<div class="flex-1 flex items-center justify-between bg-white/[0.03] border border-white/5 rounded-xl py-3 px-4 hover:border-purple-500/30 transition-colors">
					<span class="text-[10px] uppercase tracking-[0.15em] text-white/40 font-bold">Items</span>
					<span id="cart-count" class="text-lg font-black text-purple-500 drop-shadow-[0_0_10px_rgba(168,85,247,0.4)]" data-cart-count>{{ cart.item_count }}</span>
				</div>

				<div class="flex items-center gap-2 bg-emerald-500/5 border border-emerald-500/10 rounded-xl py-3 px-4">
					<div class="flex h-2 w-2 relative">
						<span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
						<span class="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span>
					</div>
					<span class="text-[10px] uppercase tracking-[0.15em] text-emerald-400 font-bold whitespace-nowrap">Free shipping</span>
				</div>
			</div>

			<div class="flex items-center justify-center gap-2 pt-2 border-t border-white/5">
				<p class="text-[10px] text-white/50 uppercase tracking-widest leading-none">Est. Delivery: <span class="text-white font-bold text-[11px]">3-12 Business Days</span></p>
			</div>
		</div>
	</div>

	<div class="relative flex-1 overflow-y-auto">
		<div id="cart-items" class="p-6 space-y-6 min-h-full" data-cart-items>
			{% if cart.item_count == 0 %}
				<div class="flex flex-col items-center justify-center h-full min-h-[60vh] text-white/30 space-y-4">
					<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
						<circle cx="9" cy="21" r="1"></circle>
						<circle cx="20" cy="21" r="1"></circle>
						<path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
					</svg>
					<p class="text-[10px] uppercase tracking-widest">Your cart is emptyABC</p>
					<a href="{{ routes.collections_url }}" class="bg-white text-black p-4 lg:py-3 rounded-lg font-black uppercase text-[8px] lg:text-[9px] tracking-[0.2em] text-center hover:bg-purple-600 hover:text-white transition-all duration-300">View the collection</a>
				</div>
			{% else %}
				{% for item in cart.items %}
					<div class="flex gap-4 animate-[fadeIn_0.3s_ease-out]" data-cart-line data-key="{{ item.key }}" data-quantity="{{ item.quantity }}">
						<div class="w-20 h-20 bg-white/5 rounded-lg overflow-hidden flex-shrink-0">
							{% if item.image %}
								<img src="{{ item.image | image_url: width: 160 }}" class="w-full h-full object-cover" alt="{{ item.product.title | escape }}" />
							{% endif %}
						</div>
						<div class="flex-1 flex flex-col justify-between py-1">
							<div>
								<h4 class="text-white text-base font-black leading-snug">{{ item.product.title }}</h4>
								{% if item.variant.title != 'Default Title' %}
									<p class="text-white/60 text-xs mt-1">{{ item.variant.title }}</p>
								{% endif %}
								<p class="text-white/70 text-xs mt-1">Price: {{ item.final_price | money }}</p>
							</div>
							<div class="flex items-center justify-between">
								<div class="flex items-center gap-2 bg-white/5 rounded-lg px-2 py-1">
									<button class="text-white/50 hover:text-white px-1" data-cart-action="decrease" data-key="{{ item.key }}">-</button>
									<span class="text-xs text-white/90 font-mono w-4 text-center">{{ item.quantity }}</span>
									<button class="text-white/50 hover:text-white px-1" data-cart-action="increase" data-key="{{ item.key }}">+</button>
								</div>
								<button class="text-red-500/50 hover:text-red-400 p-1" data-cart-action="remove" data-key="{{ item.key }}">
									<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
								</button>
							</div>
						</div>
					</div>
				{% endfor %}
			{% endif %}
		</div>

		<div class="absolute inset-0 bg-black/40 backdrop-blur-sm hidden items-center justify-center" data-cart-loader>
			<div class="flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/70">
				<span class="w-2 h-2 rounded-full bg-purple-500 animate-pulse"></span>
				Loading
			</div>
		</div>
	</div>

	<div id="cart-footer" class="border-t border-white/5 bg-[#0d0d0d]">
		<div class="mt-auto p-6 bg-zinc-900/50 border-t border-white/5 backdrop-blur-xl">
			<div class="flex justify-between items-center mb-1">
				<div class="flex flex-col">
					<span class="text-white/40 text-[10px] uppercase tracking-[0.2em] font-bold">Subtotal</span>
					<span class="text-[9px] text-purple-400/60 uppercase tracking-widest">Final Price</span>
				</div>
				<div class="text-right">
					<span class="text-3xl font-black tracking-tighter text-white inline-flex items-center gap-1">
						<span class="text-purple-500 text-lg">{{ cart.currency.symbol }}</span>
						<span id="cart-total" data-cart-total>{{ cart.total_price | money_without_currency }}</span>
					</span>
				</div>
			</div>

			<div class="flex items-center gap-3 my-4">
				<div class="h-px flex-1 bg-white/5"></div>
				<p class="text-[9px] text-white/30 uppercase tracking-[0.1em] whitespace-nowrap">Tax & Shipping included</p>
				<div class="h-px flex-1 bg-white/5"></div>
			</div>

			<a href="{{ routes.cart_url }}" class="group relative block w-full bg-white text-black py-2.5 lg:py-3 rounded-lg font-black uppercase text-[8px] lg:text-[9px] tracking-[0.2em] text-center hover:bg-purple-600 hover:text-white transition-all duration-300 shadow-lg shadow-purple-500/5">
                <div class="flex items-center justify-center gap-2">
                    <span>Checkout Now</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="group-hover:translate-x-1 transition-transform">
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                        <polyline points="12 5 19 12 12 19"></polyline>
                    </svg>
                </div>
            </a>

			<div class="mt-4 flex justify-center gap-4 opacity-20 grayscale">
				<img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg" alt="Visa" class="h-3">
				<img src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg" alt="Mastercard" class="h-5">
				<img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg" alt="PayPal" class="h-3">
			</div>
		</div>
	</div>
</aside>

{% schema %}
{
	"name": "Cart Drawer",
	"settings": [],
	"blocks": [],
	"presets": [{ "name": "Cart Drawer", "category": "Cart" }]
}
{% endschema %}
